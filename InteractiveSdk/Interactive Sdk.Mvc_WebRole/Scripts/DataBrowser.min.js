var isStateChangeExecute=true,current_filter,current_viewType,current_tagType,current_language,current_mapStyle,current_zoomLevel,current_longitude,current_latitude,current_sceneId=0,current_birdseyeSceneOrientation=0,current_mapDetails="",current_horizontalColumnName,current_dateRange,current_verticalOptions,current_verticalColumnName,current_verticalColumnOptions,hash_filter,hash_viewType,hash_tagType,hash_language,hash_mapStyle,hash_zoomLevel,hash_longitude,hash_latitude,hash_sceneId=0,hash_birdseyeSceneOrientation=0,hash_horizontalColumnName,hash_dateRange,hash_verticalOptions,hash_verticalColumnName,hash_verticalColumnOptions,defaultZoomLevelOfMapSet=11,indexInHashWhereMapStyleStarts=3,isBookMarkedMapView="N",isHashChangeRoute=false,isBookmarkedUrl=false,birdsEyeViewSceneIdChange=false,centerPixel,birdsEyeViewZoomLevel=11,birdsEyeSceneGlobal="North";function getCurrentMapStatus(){try{current_mapStyle=map.GetMapStyle();switch(current_mapStyle){case"r":case"a":case"h":var c=map.GetCenter();current_zoomLevel=map.GetZoomLevel();current_longitude=c.Longitude;current_latitude=c.Latitude;current_mapDetails=current_mapStyle+"/"+current_zoomLevel+"/"+current_longitude+"/"+current_latitude;break;case"b":case"o":var a=map.GetBirdseyeScene();current_zoomLevel=map.GetZoomLevel();var b=a.LatLongToPixel(map.GetCenter(),current_zoomLevel);current_longitude=b.x;current_latitude=b.y;current_sceneId=a.GetID();current_birdseyeSceneOrientation=a.GetOrientation();current_mapDetails=current_mapStyle+"/"+current_zoomLevel+"/"+current_longitude+"/"+current_latitude+"/"+current_sceneId+"/"+current_birdseyeSceneOrientation}}catch(d){errorFunction(mapControlError,true);hideLoadingIndicator()}}function viewHandler(){if(current_viewType=="MapView"&&current_tagType=="Results"){var a=createHashValue();Sys.Application.addHistoryPoint({param:a},siteTitle)}}function setMapViewByHash(){try{map.DetachEvent("onchangeview",viewHandler);switch(hash_mapStyle){case"r":case"a":case"h":showLoadingIndicator();map.SetMapStyle(hash_mapStyle);getCurrentMapStatus();if(current_zoomLevel!=hash_zoomLevel||current_latitude!=hash_latitude||current_longitude!=hash_longitude){map.AttachEvent("onchangeview",hideLoadingIndicatorAndDetach);map.SetCenterAndZoom(new VELatLong(hash_latitude,hash_longitude),hash_zoomLevel)}else hideLoadingIndicatorAndDetach();break;case"o":case"b":showLoadingIndicator();if(current_mapStyle!=hash_mapStyle){map.AttachEvent("onchangemapstyle",onChangeMapStyleOfBirdsEye);map.SetMapStyle(hash_mapStyle)}else onChangeMapStyleOfBirdsEye()}}catch(a){errorFunction(mapControlError,true);hideLoadingIndicator()}}function onChangeMapStyleOfBirdsEye(){try{map.DetachEvent("onchangemapstyle",onChangeMapStyleOfBirdsEye);if(current_sceneId!=hash_sceneId){map.AttachEvent("onobliquechange",onChangeSceneIdOfBirdsEye);map.SetBirdseyeScene(hash_sceneId)}else onChangeSceneIdOfBirdsEye()}catch(a){errorFunction(mapControlError,true);hideLoadingIndicator()}}function onChangeSceneIdOfBirdsEye(){try{map.DetachEvent("onobliquechange",onChangeSceneIdOfBirdsEye);map.AttachEvent("onchangeview",hideLoadingIndicatorAndDetach);birdsEyeViewZoomLevel=parseInt(hash_zoomLevel);centerPixel=new VEPixel(hash_longitude,hash_latitude);birdsEyeSceneGlobal=map.GetBirdseyeScene();var a=birdsEyeSceneGlobal.PixelToLatLong(centerPixel,birdsEyeViewZoomLevel);switch(hash_birdseyeSceneOrientation){case"North":map.SetBirdseyeScene(a,VEOrientation.North,birdsEyeViewZoomLevel,dummyCallback);break;case"South":map.SetBirdseyeScene(a,VEOrientation.South,birdsEyeViewZoomLevel,dummyCallback);break;case"East":map.SetBirdseyeScene(a,VEOrientation.East,birdsEyeViewZoomLevel,dummyCallback);break;case"West":map.SetBirdseyeScene(a,VEOrientation.West,birdsEyeViewZoomLevel,dummyCallback)}}catch(b){errorFunction(mapControlError,true);hideLoadingIndicator()}}$(document).ready(function(){$("#LoadingIndicatorPanel").ajaxStart(function(){showLoadingIndicator()});$("#LoadingIndicatorPanel").ajaxStop(function(){hideLoadingIndicator()});$("select#languagesDataView").change(function(){languageDataViewSelectedIndexChanged()});$("select#languagesMapView").change(function(){languageMapViewSelectedIndexChanged()});$("select#languagesBarChartView").change(function(){languageBarChartViewSelectedIndexChanged()});$("select#languagesPieChartView").change(function(){languagePieChartViewSelectedIndexChanged()});$("#Para1").click(function(){$(this).next("#Para2").slideToggle(350);return false});$("#Para1").toggle(function(){$("#ExpandCollapseImage").attr("src",CollapserImage);$("#ExpandCollapseImage").attr("title","Hide Details");$("#ExpandCollapseImage").attr("alt","Hide Details")},function(){$("#ExpandCollapseImage").attr("src",ExpanderImage);$("#ExpandCollapseImage").attr("title","Show Details");$("#ExpandCollapseImage").attr("alt","Show Details")})});function initializePage(){$("#filterDialog").dialog({width:530,autoOpen:false,show:"slide",modal:true,resizable:false,position:"center"});$("#filterDialog").css({visibility:"visible",cursor:"pointer"});$("#tabs").tabs({select:tabsSelected});$("#tabs").css({visibility:"visible"});$("#sampleCodeTabs").tabs({select:tabsSelected});$("#sampleCodeTabs").css({visibility:"visible"});$("#copyDataCodeButton").click(copyDataCode);$("#copyMapCodeButton").click(copyMapCode);$("#copyBarChartCodeButton").click(copyBarChartCode);$("#copyPieChartCodeButton").click(copyPieChartCode);$.clipboardReady(clipboardReady,{swfpath:"~/Scripts/jquery.clipboard.swf"});Sys.Application.add_navigate(onStateChanged)}function page_init(){isBookmarkedUrl=true;isHashChangeRoute=false;map=new VEMap("myMap");map.AttachEvent("onerror",showMapControlError);map.LoadMap();map.Resize(862,450);initializePage();readHashValueIntoHashVariables();setPageAccordingToHashVariables()}function replaceCurrentVariablesWithHashVariables(){current_filter=hash_filter;current_viewType=hash_viewType;current_tagType=hash_tagType;current_language=hash_language;current_mapStyle=hash_mapStyle;current_zoomLevel=hash_zoomLevel;current_longitude=hash_longitude;current_latitude=hash_latitude;current_sceneId=hash_sceneId;current_birdseyeSceneOrientation=hash_birdseyeSceneOrientation;current_horizontalColumnName=hash_horizontalColumnName;current_dateRange=hash_dateRange;current_verticalOptions=hash_verticalOptions;current_verticalColumnName=hash_verticalColumnName;current_verticalColumnOptions=hash_verticalColumnOptions}function setDataView(){switch(hash_tagType){case"SampleCode":if(isHashChangeRoute){if(current_viewType!=hash_viewType){isBookmarkedUrl=true;!$("#liDataView").hasClass("ui-state-active")&&$("#tabs").tabs("select",0)}if(current_tagType!=hash_tagType){isBookmarkedUrl=true;$("#dataViewAccordion").accordion("activate",0)}if(current_language!=hash_language){isBookmarkedUrl=true;document.getElementById("languagesDataView").value=hash_language;languageDataViewSelectedIndexChanged()}if(current_filter!=hash_filter){isBookmarkedUrl=true;SetFilter(hash_filter);runClicked()}}else{!$("#liDataView").hasClass("ui-state-active")&&$("#tabs").tabs("select",0);$("#dataViewAccordion").accordion("activate",0);document.getElementById("languagesDataView").value=hash_language;languageDataViewSelectedIndexChanged();SetFilter(hash_filter);runClicked()}break;case"Results":if(isHashChangeRoute){if(current_viewType!=hash_viewType){isBookmarkedUrl=true;!$("#liDataView").hasClass("ui-state-active")&&$("#tabs").tabs("select",0)}if(current_tagType!=hash_tagType){isBookmarkedUrl=true;$("#dataViewAccordion").accordion("activate",1)}if(current_filter!=hash_filter){isBookmarkedUrl=true;SetFilter(hash_filter);runClicked()}}else{SetFilter(hash_filter);runClicked()}}}function setMapView(){switch(hash_tagType){case"SampleCode":if(isHashChangeRoute){if(current_viewType!=hash_viewType){isBookmarkedUrl=true;!$("#liMapView").hasClass("ui-state-active")&&$("#tabs").tabs("select",1)}if(current_tagType!=hash_tagType){isBookmarkedUrl=true;$("#mapViewAccordion").accordion("activate",0)}if(current_language!=hash_language){isBookmarkedUrl=true;document.getElementById("languagesMapView").value=hash_language;languageMapViewSelectedIndexChanged()}if(current_filter!=hash_filter){isBookmarkedUrl=true;SetFilter(hash_filter);runClicked()}}else{!$("#liMapView").hasClass("ui-state-active")&&$("#tabs").tabs("select",1);$("#mapViewAccordion").accordion("activate",0);document.getElementById("languagesMapView").value=hash_language;languageMapViewSelectedIndexChanged();SetFilter(hash_filter);runClicked()}break;case"Results":if(isHashChangeRoute){if(current_viewType!=hash_viewType){isBookmarkedUrl=true;!$("#liMapView").hasClass("ui-state-active")&&$("#tabs").tabs("select",1)}if(current_tagType!=hash_tagType){isBookmarkedUrl=true;$("#mapViewAccordion").accordion("activate",1)}if(current_filter!=hash_filter){isBookMarkedMapView="N";isBookmarkedUrl=true;SetFilter(hash_filter);runClicked()}else setMapViewByHash()}else{!$("#liMapView").hasClass("ui-state-active")&&$("#tabs").tabs("select",1);isBookMarkedMapView="Y";SetFilter(hash_filter);runClicked()}}}function setBarChartView(){switch(hash_tagType){case"SampleCode":if(isHashChangeRoute){if(current_viewType!=hash_viewType){isBookmarkedUrl=true;!$("#liBarChart").hasClass("ui-state-active")&&$("#tabs").tabs("select",2)}if(current_tagType!=hash_tagType){isBookmarkedUrl=true;$("#barChartAccordion").accordion("activate",0)}if(current_language!=hash_language){isBookmarkedUrl=true;document.getElementById("languagesBarChartView").value=hash_language;languageBarChartViewSelectedIndexChanged()}if(current_filter!=hash_filter){isBookmarkedUrl=true;SetFilter(hash_filter);runClicked()}}else{!$("#liBarChart").hasClass("ui-state-active")&&$("#tabs").tabs("select",2);$("#barChartAccordion").accordion("activate",0);document.getElementById("languagesBarChartView").value=hash_language;languageBarChartViewSelectedIndexChanged();SetFilter(hash_filter);runClicked()}break;case"Results":if(isHashChangeRoute){if(current_viewType!=hash_viewType){isBookmarkedUrl=true;!$("#liBarChart").hasClass("ui-state-active")&&$("#tabs").tabs("select",2)}if(current_tagType!=hash_tagType){isBookmarkedUrl=true;$("#barChartAccordion").accordion("activate",1)}if(current_filter!=hash_filter||current_horizontalColumnName!=hash_horizontalColumnName||current_dateRange!=hash_dateRange||current_verticalOptions!=hash_verticalOptions||current_verticalColumnName!=hash_verticalColumnName||current_verticalColumnOptions!=hash_verticalColumnOptions){isBookmarkedUrl=true;SetFilter(hash_filter);runClicked();isBookmarkedUrl=true;ResetBarChartFilter();SetBarChartFilter();drawBarChart(hash_filter,hash_horizontalColumnName,hash_dateRange,hash_verticalOptions,hash_verticalColumnName,hash_verticalColumnOptions)}}else{!$("#liBarChart").hasClass("ui-state-active")&&$("#tabs").tabs("select",2);SetFilter(hash_filter);runClicked();ResetBarChartFilter();SetBarChartFilter();drawBarChart(hash_filter,hash_horizontalColumnName,hash_dateRange,hash_verticalOptions,hash_verticalColumnName,hash_verticalColumnOptions)}}}function setPieChartView(){switch(hash_tagType){case"SampleCode":if(isHashChangeRoute){if(current_viewType!=hash_viewType){isBookmarkedUrl=true;!$("#liPieChart").hasClass("ui-state-active")&&$("#tabs").tabs("select",3)}if(current_tagType!=hash_tagType){isBookmarkedUrl=true;$("#pieChartAccordion").accordion("activate",0)}if(current_language!=hash_language){isBookmarkedUrl=true;document.getElementById("languagesPieChartView").value=hash_language;languagePieChartViewSelectedIndexChanged()}if(current_filter!=hash_filter){isBookmarkedUrl=true;SetFilter(hash_filter);runClicked()}}else{!$("#liPieChart").hasClass("ui-state-active")&&$("#tabs").tabs("select",3);$("#pieChartAccordion").accordion("activate",0);document.getElementById("languagesPieChartView").value=hash_language;languagePieChartViewSelectedIndexChanged();SetFilter(hash_filter);runClicked()}break;case"Results":if(isHashChangeRoute){if(current_viewType!=hash_viewType){isBookmarkedUrl=true;!$("#liPieChart").hasClass("ui-state-active")&&$("#tabs").tabs("select",3)}if(current_tagType!=hash_tagType){isBookmarkedUrl=true;$("#pieChartAccordion").accordion("activate",1)}if(current_filter!=hash_filter||current_horizontalColumnName!=hash_horizontalColumnName||current_dateRange!=hash_dateRange||current_verticalOptions!=hash_verticalOptions||current_verticalColumnName!=hash_verticalColumnName||current_verticalColumnOptions!=hash_verticalColumnOptions){isBookmarkedUrl=true;SetFilter(hash_filter);runClicked();isBookmarkedUrl=true;ResetPieChartFilter();SetPieChartFilter();drawPieChart(hash_filter,hash_horizontalColumnName,hash_dateRange,hash_verticalOptions,hash_verticalColumnName,hash_verticalColumnOptions)}}else{!$("#liPieChart").hasClass("ui-state-active")&&$("#tabs").tabs("select",3);SetFilter(hash_filter);runClicked();ResetPieChartFilter();SetPieChartFilter();drawPieChart(hash_filter,hash_horizontalColumnName,hash_dateRange,hash_verticalOptions,hash_verticalColumnName,hash_verticalColumnOptions)}}}function setPageAccordingToHashVariables(){isBookmarkedUrl&&replaceCurrentVariablesWithHashVariables();switch(hash_viewType){case"DataView":setDataView();isHashChangeRoute=false;isBookmarkedUrl=false;break;case"MapView":setMapView();isHashChangeRoute=false;isBookmarkedUrl=false;break;case"BarChartView":setBarChartView();isHashChangeRoute=false;isBookmarkedUrl=false;break;case"PieChartView":setPieChartView();isHashChangeRoute=false;isBookmarkedUrl=false}}function showMapControlError(){alert(mapControlError)}function wheelCallback(a){window.scrollBy(0,-5*a.mouseWheelChange);return true}function onStateChanged(){if(isDeltaInHashAndCurrent()){isBookmarkedUrl=false;isHashChangeRoute=true;setPageAccordingToHashVariables()}}function isDeltaInHashAndCurrent(){readHashValueIntoHashVariables();var a=createHashValue();switch(hash_viewType){case"DataView":switch(hash_tagType){case"SampleCode":if(hash_filter!=current_filter||hash_viewType!=current_viewType||hash_tagType!=current_tagType||hash_language!=current_language)return true;else return false;break;case"Results":if(hash_filter!=current_filter||hash_viewType!=current_viewType||hash_tagType!=current_tagType)return true;else return false}break;case"MapView":switch(hash_tagType){case"SampleCode":if(hash_filter!=current_filter||hash_viewType!=current_viewType||hash_tagType!=current_tagType||hash_language!=current_language)return true;else return false;break;case"Results":getCurrentMapStatus();switch(hash_mapStyle){case"r":case"a":case"h":if(hash_filter!=current_filter||hash_viewType!=current_viewType||hash_tagType!=current_tagType||hash_mapStyle!=current_mapStyle||hash_zoomLevel!=current_zoomLevel||hash_longitude!=current_longitude||hash_latitude!=current_latitude)return true;else return false;break;case"b":case"o":if(hash_filter!=current_filter||hash_viewType!=current_viewType||hash_tagType!=current_tagType||hash_mapStyle!=current_mapStyle||hash_zoomLevel!=current_zoomLevel||hash_longitude!=current_longitude||hash_latitude!=current_latitude||hash_sceneId!=current_sceneId||hash_birdseyeSceneOrientation!=current_birdseyeSceneOrientation)return true;else return false}}break;case"BarChartView":case"PieChartView":switch(hash_tagType){case"SampleCode":if(hash_filter!=current_filter||hash_viewType!=current_viewType||hash_tagType!=current_tagType||hash_language!=current_language)return true;else return false;break;case"Results":if(hash_filter!=current_filter||hash_viewType!=current_viewType||hash_tagType!=current_tagType||hash_horizontalColumnName!=current_horizontalColumnName||hash_dateRange!=current_dateRange||hash_verticalOptions!=current_verticalOptions||hash_verticalColumnName!=current_verticalColumnName||hash_verticalColumnOptions!=current_verticalColumnOptions)return true;else return false}}}function errorFunction(a,b){if(!b)a=a.statusText;$.ajax({type:"POST",url:"../DataBrowserError/",data:{error:a},dataType:"html",success:function(a){document.getElementById("divError").style.display="block";$("#divError").html(a);document.getElementById("tabs").style.display="none"}})}function getData(a){$.ajax({type:"POST",url:"../DataBrowserRun/",data:{container:container,entitySet:entitySet,filter:a},dataType:"html",error:function(a){errorFunction(a,false)},success:function(a){if(a.toString().indexOf('id="pError"',0)>=0){document.getElementById("divError").style.display="block";$("#divError").html(a);document.getElementById("tabs").style.display="none"}else{document.getElementById("divError").style.display="none";document.getElementById("tabs").style.display="block";document.getElementById("tabs").style.visibility="visible";$("#divDataViewResults").html(a)}}})}function SetPagingLinkVisibility(){var b=document.getElementById("labelPrevEnable").title,a=document.getElementById("labelNextEnable").title;if(b=="1")document.getElementById("prevLink").disabled=false;else{document.getElementById("prevLink").disabled=true;document.getElementById("prevLink").className="ico icoPrevDisabled"}if(a=="1")document.getElementById("nextLink").disabled=false;else{document.getElementById("nextLink").disabled=true;document.getElementById("nextLink").className="ico icoNextDisabled"}}function ShowFilterHintsDialog(){$("#filterDialog").dialog("open")}function ShowHideError(){var a=document.getElementById("labelError").title;if(a=="")document.getElementById("divError").style.display="none";else document.getElementById("divError").style.display="block"}function languageDataViewSelectedIndexChanged(){current_language=readSampleCodeLanguageFromActiveViewType();var a=createHashValue();changeDataViewLanguage(current_language);if(isBookmarkedUrl==false)Sys.Application.addHistoryPoint({param:a},siteTitle);else isBookmarkedUrl=false}function changeDataViewLanguage(a){$.ajax({type:"POST",url:"../LoadSampleCodeDataView/",data:{selectedFileName:a,container:container,entitySet:entitySet},dataType:"html",success:function(a){$("#divDataViewSampleCode").html(a)}})}function changeMapViewLanguage(a){$.ajax({type:"POST",url:"../LoadSampleCodeMapView/",data:{selectedFileName:a,container:container,entitySet:entitySet},dataType:"html",success:function(a){$("#divMapViewSampleCode").html(a)}})}function languageMapViewSelectedIndexChanged(){current_language=readSampleCodeLanguageFromActiveViewType();var a=createHashValue();changeMapViewLanguage(current_language);if(isBookmarkedUrl==false)Sys.Application.addHistoryPoint({param:a},siteTitle);else isBookmarkedUrl=false}function languageBarChartViewSelectedIndexChanged(){current_language=readSampleCodeLanguageFromActiveViewType();var a=createHashValue();changeBarChartViewLanguage(current_language);if(isBookmarkedUrl==false)Sys.Application.addHistoryPoint({param:a},siteTitle);else isBookmarkedUrl=false}function changeBarChartViewLanguage(a){$.ajax({type:"POST",url:"../LoadSampleCodeBarChartView/",data:{selectedFileName:a,container:container,entitySet:entitySet},dataType:"html",success:function(a){$("#divBarChartViewSampleCode").html(a)}})}function languagePieChartViewSelectedIndexChanged(){current_language=readSampleCodeLanguageFromActiveViewType();var a=createHashValue();changePieChartViewLanguage(current_language);if(isBookmarkedUrl==false)Sys.Application.addHistoryPoint({param:a},siteTitle);else isBookmarkedUrl=false}function changePieChartViewLanguage(a){$.ajax({type:"POST",url:"../LoadSampleCodePieChartView/",data:{selectedFileName:a,container:container,entitySet:entitySet},dataType:"html",success:function(a){$("#divPieChartViewSampleCode").html(a)}})}function previousClicked(){if($("#prevLink").hasClass("disabled")==false){var a=current_filter;SetFilter(a);$.ajax({type:"POST",url:"../DataBrowserPaging/",data:{container:container,entitySet:entitySet,filter:a,link:"Previous"},dataType:"html",error:function(a){errorFunction(a,false)},success:function(a){if(a.toString().indexOf('id="pError"',0)>=0){document.getElementById("divError").style.display="block";$("#divError").html(a);document.getElementById("tabs").style.display="none"}else{document.getElementById("divError").style.display="none";document.getElementById("tabs").style.display="block";document.getElementById("tabs").style.visibility="visible";$("#divDataViewResults").html(a)}}})}}function nextClicked(){if($("#nextLink").hasClass("disabled")==false){var a=current_filter;SetFilter(a);$.ajax({type:"POST",url:"../DataBrowserPaging/",data:{container:container,entitySet:entitySet,filter:a,link:"Next"},dataType:"html",error:function(a){errorFunction(a,false)},success:function(a){if(a.toString().indexOf('id="pError"',0)>=0){document.getElementById("divError").style.display="block";$("#divError").html(a);document.getElementById("tabs").style.display="none"}else{document.getElementById("divError").style.display="none";document.getElementById("tabs").style.display="block";document.getElementById("tabs").style.visibility="visible";$("#divDataViewResults").html(a)}}})}}function getDefaultHashValueFor(b,a){hash_filter=noFilterText;switch(b){case"DataView":hash_viewType="DataView";switch(a){case"SampleCode":hash_tagType="SampleCode";hash_language=$("[id =languages"+hash_viewType+"]")[0].value;break;case"Results":hash_tagType="Results"}break;case"MapView":hash_viewType="MapView";switch(a){case"SampleCode":hash_tagType="SampleCode";hash_language=$("[id =languages"+hash_viewType+"]")[0].value;break;case"Results":hash_tagType="Results";hash_mapStyle="r";hash_zoomLevel=1;hash_longitude="0";hash_latitude="0"}break;case"BarChartView":hash_viewType="BarChartView";switch(a){case"SampleCode":hash_tagType="SampleCode";hash_language=$("[id =languages"+hash_viewType+"]")[0].value;break;case"Results":hash_tagType="Results";hash_horizontalColumnName="X";hash_dateRange="X";hash_verticalOptions="Option1";hash_verticalColumnName="X";hash_verticalColumnOptions="Aggregate"}break;case"PieChartView":hash_viewType="PieChartView";switch(a){case"SampleCode":hash_tagType="SampleCode";hash_language=$("[id =languages"+hash_viewType+"]")[0].value;break;case"Results":hash_tagType="Results";hash_horizontalColumnName="X";hash_dateRange="X";hash_verticalOptions="Option1";hash_verticalColumnName="X";hash_verticalColumnOptions="Aggregate"}}}function isValuePresentInLanguageComboBox(c,d){for(var b=$("[id =languages"+d+"]"),a=0;a<b[0].length;a++)if(b[0][a].value==c)return true;return false}function readHashValueIntoHashVariables(){var b=window.location.hash;if(b==""||b=="#"){getDefaultHashValueFor("DataView","Results");return}var a=decodeURI(b).substr(7).split(hashSeparator);if(a.length<=2){getDefaultHashValueFor("DataView","Results");return}if(a.length>=2){hash_filter=unescape(a[0]);hash_viewType=a[1];hash_tagType=a[2];switch(hash_viewType){case"DataView":switch(hash_tagType){case"SampleCode":hash_language=a[3];(hash_language==""||!isValuePresentInLanguageComboBox(hash_language,"DataView"))&&getDefaultHashValueFor("DataView","SampleCode");break;case"Results":break;default:getDefaultHashValueFor("DataView","Results")}break;case"MapView":switch(hash_tagType){case"SampleCode":hash_language=a[3];(hash_language==""||!isValuePresentInLanguageComboBox(hash_language,"MapView"))&&getDefaultHashValueFor("MapView","SampleCode");break;case"Results":hash_mapStyle=a[indexInHashWhereMapStyleStarts];if(hash_mapStyle!="r"&&hash_mapStyle!="a"&&hash_mapStyle!="h"&&hash_mapStyle!="o"&&hash_mapStyle!="b"){getDefaultHashValueFor("MapView","Results");return}hash_zoomLevel=parseInt(a[indexInHashWhereMapStyleStarts+1]);if(isNaN(hash_zoomLevel)){getDefaultHashValueFor("MapView","Results");return}hash_longitude=a[indexInHashWhereMapStyleStarts+2];if(isNaN(hash_longitude)){getDefaultHashValueFor("MapView","Results");return}hash_latitude=a[indexInHashWhereMapStyleStarts+3];if(isNaN(hash_latitude)){getDefaultHashValueFor("MapView","Results");return}switch(hash_mapStyle){case"b":case"o":hash_sceneId=a[indexInHashWhereMapStyleStarts+4];if(isNaN(hash_sceneId)){getDefaultHashValueFor("MapView","Results");return}hash_birdseyeSceneOrientation=a[indexInHashWhereMapStyleStarts+5];if(hash_birdseyeSceneOrientation!="North"&&hash_birdseyeSceneOrientation!="South"&&hash_birdseyeSceneOrientation!="East"&&hash_birdseyeSceneOrientation!="West"){getDefaultHashValueFor("MapView","Results");return}}break;default:getDefaultHashValueFor("MapView","Results")}break;case"BarChartView":switch(hash_tagType){case"SampleCode":hash_language=a[3];(hash_language==""||!isValuePresentInLanguageComboBox(hash_language,"BarChartView"))&&getDefaultHashValueFor("BarChartView","SampleCode");break;case"Results":hash_horizontalColumnName=a[3];hash_dateRange=a[4];hash_verticalOptions=a[5];hash_verticalColumnName=a[6];hash_verticalColumnOptions=a[7];break;default:getDefaultHashValueFor("BarChartView","Results")}break;case"PieChartView":switch(hash_tagType){case"SampleCode":hash_language=a[3];(hash_language==""||!isValuePresentInLanguageComboBox(hash_language,"PieChartView"))&&getDefaultHashValueFor("PieChartView","SampleCode");break;case"Results":hash_horizontalColumnName=a[3];hash_dateRange=a[4];hash_verticalOptions=a[5];hash_verticalColumnName=a[6];hash_verticalColumnOptions=a[7];break;default:getDefaultHashValueFor("PieChartView","Results")}break;default:getDefaultHashValueFor("DataView","Results")}}}function runClicked(){current_filter=GetFilter();getData(current_filter);loadKml(current_filter);if(isBookmarkedUrl==false){switch(current_viewType){case"DataView":case"MapView":ResetBarChartFilter();ResetPieChartFilter();break;case"BarChartView":if(current_tagType=="Results"){getBarChart();ResetPieChartFilter()}break;case"PieChartView":if(current_tagType=="Results"){getPieChart();ResetBarChartFilter()}}var a=createHashValue();Sys.Application.addHistoryPoint({param:a},siteTitle)}else isBookmarkedUrl=false}function readSampleCodeLanguageFromActiveViewType(){switch(current_viewType){case"DataView":return $("#languagesDataView > option:selected").attr("value");case"MapView":return $("#languagesMapView > option:selected").attr("value");case"BarChartView":return $("#languagesBarChartView > option:selected").attr("value");case"PieChartView":return $("#languagesPieChartView > option:selected").attr("value")}}function createHashValue(){switch(current_tagType){case"SampleCode":current_language=readSampleCodeLanguageFromActiveViewType();return escape(current_filter)+hashSeparator+current_viewType+hashSeparator+current_tagType+hashSeparator+current_language;case"Results":switch(current_viewType){case"DataView":return escape(current_filter)+hashSeparator+current_viewType+hashSeparator+current_tagType;case"MapView":try{current_mapStyle=map.GetMapStyle();switch(current_mapStyle){case"r":case"a":case"h":var c=map.GetCenter();current_zoomLevel=map.GetZoomLevel();current_longitude=c.Longitude;current_latitude=c.Latitude;current_mapDetails=current_mapStyle+hashSeparator+current_zoomLevel+hashSeparator+current_longitude+hashSeparator+current_latitude;break;case"b":case"o":var a=map.GetBirdseyeScene();current_zoomLevel=map.GetZoomLevel();var b=a.LatLongToPixel(map.GetCenter(),current_zoomLevel);current_longitude=b.x;current_latitude=b.y;current_sceneId=a.GetID();current_birdseyeSceneOrientation=a.GetOrientation();current_mapDetails=current_mapStyle+hashSeparator+current_zoomLevel+hashSeparator+current_longitude+hashSeparator+current_latitude+hashSeparator+current_sceneId+hashSeparator+current_birdseyeSceneOrientation}}catch(d){errorFunction(mapControlError,true);hideLoadingIndicator()}return escape(current_filter)+hashSeparator+current_viewType+hashSeparator+current_tagType+hashSeparator+current_mapDetails;case"BarChartView":getBarChartParametersInCurrentVariables();return escape(current_filter)+hashSeparator+current_viewType+hashSeparator+current_tagType+hashSeparator+current_horizontalColumnName+hashSeparator+current_dateRange+hashSeparator+current_verticalOptions+hashSeparator+current_verticalColumnName+hashSeparator+current_verticalColumnOptions;case"PieChartView":getPieChartParametersInCurrentVariables();return escape(current_filter)+hashSeparator+current_viewType+hashSeparator+current_tagType+hashSeparator+current_horizontalColumnName+hashSeparator+current_dateRange+hashSeparator+current_verticalOptions+hashSeparator+current_verticalColumnName+hashSeparator+current_verticalColumnOptions}}}function ResetBarChartFilter(){document.getElementById("ddlBarHorizontal")[0].selected=true;document.getElementById("ddlBarVertical")[0].selected=true;$("#labelBarDateRange").attr("style","display:none;");document.getElementById("ddlBarDateRange").style.display="none";var b=document.getElementsByName("BarVerticalOptions");b[0].checked="checked";barOption1Selected();columnNameSelected=horizontalAxisColText;$("#labelBarCount > span").remove();$("#labelBarCount").append("<span>&ldquo;"+columnNameSelected+"&rdquo;</span>");var a=document.getElementsByName("BarVerticalColumnOptions");a[0].checked="checked";document.getElementById("divBarChartResults").style.display="none"}function ResetPieChartFilter(){document.getElementById("ddlPieHorizontal")[0].selected=true;document.getElementById("ddlPieVertical")[0].selected=true;$("#labelPieDateRange").attr("style","display:none;");document.getElementById("ddlPieDateRange").style.display="none";var b=document.getElementsByName("PieVerticalOptions");b[0].checked="checked";pieOption1Selected();columnNameSelected=horizontalAxisColText;$("#labelPieCount > span").remove();$("#labelPieCount").append("<span>&ldquo;"+columnNameSelected+"&rdquo;</span>");var a=document.getElementsByName("PieVerticalColumnOptions");a[0].checked="checked";document.getElementById("divPieChartResults").style.display="none"}function getBarChart(){var a=createHashValue();drawBarChart(current_filter,current_horizontalColumnName,current_dateRange,current_verticalOptions,current_verticalColumnName,current_verticalColumnOptions);SetFilter(current_filter);if(isBookmarkedUrl==false)Sys.Application.addHistoryPoint({param:a},siteTitle);else isBookmarkedUrl=false}function drawBarChart(b,c,g,a,d,e){SetFilter(b);if(c=="X"||a=="Option2"&&d=="X"){ShowBarChartError();return}var f=document.getElementById("divBarChartResults");f.style.overflow="scroll";$.ajax({type:"POST",url:"../DataBrowserRunBarChart/",data:{horizontalColumnName:c,dateRange:g,verticalOptions:a,verticalColumnName:d,verticalColumnOptions:e,container:container,entitySet:entitySet,filter:b},dataType:"html",error:function(a){errorFunction(a,false)},success:function(a){if(a.toString().indexOf('id="pError"',0)>=0){document.getElementById("divError").style.display="block";$("#divError").html(a);document.getElementById("tabs").style.display="none"}else{document.getElementById("divError").style.display="none";document.getElementById("tabs").style.display="block";document.getElementById("tabs").style.visibility="visible";$("#divBarChartResults").html(a)}}});showBarChartGraph()}function SetBarChartFilter(){var g=$("#ddlBarHorizontal > option:selected").attr("text"),a=$("#ddlBarHorizontal > option");if(hash_horizontalColumnName==undefined||hash_horizontalColumnName==defaultSelectOneText||hash_horizontalColumnName=="X")a[0].selected=true;else if(g==hash_horizontalColumnName)if(a[$("#ddlBarHorizontal > option:selected").attr("index")].value.split("^")[0]=="System.DateTime"){$("#labelBarDateRange").attr("style","display:block;");$("#ddlBarDateRange").attr("style","display:block;")}else{$("#labelBarDateRange").attr("style","display:none;");$("#ddlBarDateRange").attr("style","display:none;")}else for(i=0;i<a.length;i++)if(a[i].innerText==hash_horizontalColumnName){a[i].selected=true;if(a[i].value.split("^")[0]=="System.DateTime"){$("#labelBarDateRange").attr("style","display:block;");$("#ddlBarDateRange").attr("style","display:block;")}else{$("#labelBarDateRange").attr("style","display:none;");$("#ddlBarDateRange").attr("style","display:none;")}}else a[i].selected=false;SetBarChartLabel();var f=$("#ddlBarDateRange > option:selected").attr("text"),b=$("#ddlBarDateRange > option");if(f!=hash_dateRange)for(i=0;i<b.length;i++)if(b[i].innerText==hash_dateRange)b[i].selected=true;else b[i].selected=false;var e=document.getElementsByName("BarVerticalOptions");if(hash_verticalOptions=="Option1"){e[0].checked="checked";barOption1Selected()}else if(hash_verticalOptions=="Option2"){e[1].checked="checked";barOption2Selected()}var h=$("#ddlBarVertical > option:selected").attr("text"),c=$("#ddlBarVertical > option");if(hash_verticalColumnName==undefined||hash_verticalColumnName==defaultSelectOneText||hash_verticalColumnName=="X")c[0].selected=true;else if(h!=hash_verticalColumnName)for(i=0;i<c.length;i++)if(c[i].innerText==hash_verticalColumnName){c[i].selected=true;break}var d=document.getElementsByName("BarVerticalColumnOptions");if(hash_verticalColumnOptions=="Aggregate")d[0].checked="checked";else if(hash_verticalColumnOptions=="Average")d[1].checked="checked";document.getElementById("divBarChartResults").style.display="none"}function SetPieChartFilter(){var g=$("#ddlPieHorizontal > option:selected").attr("text"),a=$("#ddlPieHorizontal > option");if(hash_horizontalColumnName==undefined||hash_horizontalColumnName==defaultSelectOneText||hash_horizontalColumnName=="X")a[0].selected=true;else if(g==hash_horizontalColumnName)if(a[$("#ddlPieHorizontal > option:selected").attr("index")].value.split("^")[0]=="System.DateTime"){$("#labelPieDateRange").attr("style","display:block;");$("#ddlPieDateRange").attr("style","display:block;")}else{$("#labelPieDateRange").attr("style","display:none;");$("#ddlPieDateRange").attr("style","display:none;")}else for(i=0;i<a.length;i++)if(a[i].innerText==hash_horizontalColumnName){a[i].selected=true;if(a[i].value.split("^")[0]=="System.DateTime"){$("#labelPieDateRange").attr("style","display:block;");$("#ddlPieDateRange").attr("style","display:block;")}else{$("#labelPieDateRange").attr("style","display:none;");$("#ddlPieDateRange").attr("style","display:none;")}}else a[i].selected=false;SetPieChartLabel();var f=$("#ddlPieDateRange > option:selected").attr("text"),b=$("#ddlPieDateRange > option");if(f!=hash_dateRange)for(i=0;i<b.length;i++)if(b[i].innerText==hash_dateRange)b[i].selected=true;else b[i].selected=false;var e=document.getElementsByName("PieVerticalOptions");if(hash_verticalOptions=="Option1"){e[0].checked="checked";pieOption1Selected()}else if(hash_verticalOptions=="Option2"){e[1].checked="checked";pieOption2Selected()}var h=$("#ddlPieVertical > option:selected").attr("text"),c=$("#ddlPieVertical > option");if(hash_verticalColumnName==undefined||hash_verticalColumnName==defaultSelectOneText||hash_verticalColumnName=="X")c[0].selected=true;else if(h!=hash_verticalColumnName)for(i=0;i<c.length;i++)if(c[i].innerText==hash_verticalColumnName){c[i].selected=true;break}var d=document.getElementsByName("PieVerticalColumnOptions");if(hash_verticalColumnOptions=="Aggregate")d[0].checked="checked";else if(hash_verticalColumnOptions=="Average")d[1].checked="checked";document.getElementById("divPieChartResults").style.display="none"}function getPieChart(){var a=createHashValue();drawPieChart(current_filter,current_horizontalColumnName,current_dateRange,current_verticalOptions,current_verticalColumnName,current_verticalColumnOptions);SetFilter(current_filter);if(isBookmarkedUrl==false)Sys.Application.addHistoryPoint({param:a},siteTitle);else isBookmarkedUrl=false}function drawPieChart(b,c,f,a,d,e){SetFilter(b);if(c=="X"||a=="Option2"&&d=="X"){ShowPieChartError();return}$.ajax({type:"POST",url:"../DataBrowserRunPieChart/",data:{horizontalColumnName:c,dateRange:f,verticalOptions:a,verticalColumnName:d,verticalColumnOptions:e,container:container,entitySet:entitySet,filter:b},dataType:"html",error:function(a){errorFunction(a,false)},success:function(a){if(a.toString().indexOf('id="pError"',0)>=0){document.getElementById("divError").style.display="block";$("#divError").html(a);document.getElementById("tabs").style.display="none"}else{document.getElementById("divError").style.display="none";document.getElementById("tabs").style.display="block";document.getElementById("tabs").style.visibility="visible";$("#divPieChartResults").html(a)}}});showPieChartGraph()}function clipboardReady(){$("#copyDataCodeButton").css({visibility:"visible",cursor:"pointer"});$("#copyMapCodeButton").css({visibility:"visible",cursor:"pointer"});$("#copyBarChartCodeButton").css({visibility:"visible",cursor:"pointer"});$("#copyPieChartCodeButton").css({visibility:"visible",cursor:"pointer"})}function tabsSelected(c,b){switch(b.index){case 0:current_viewType="DataView";map.DetachEvent("onchangeview",viewHandler);break;case 1:current_viewType="MapView";map.AttachEvent("onchangeview",viewHandler);break;case 2:current_viewType="BarChartView";map.DetachEvent("onchangeview",viewHandler);break;case 3:current_viewType="PieChartView";map.DetachEvent("onchangeview",viewHandler)}current_tagType="Results";if(isBookmarkedUrl==false){var a=createHashValue();Sys.Application.addHistoryPoint({param:a},siteTitle)}}function loadKml(a){map.DetachEvent("onchangeview",viewHandler);if(a==noFilterText)a="";map.Clear();kmlLayer=new VEShapeLayer;kmlQuery=document.getElementById("labelBaseQuery").title+"?";if(a!=defaultFilterText&&document.getElementById("queryBox")!="")kmlQuery+="$filter="+a;kmlQuery+="&format=kml";var b=new VEShapeSourceSpecification(VEDataType.ImportXML,kmlQuery+"&$top=50",kmlLayer);map.ImportShapeLayerData(b,kmlLoaded,true)}function kmlLoaded(a){map.DetachEvent("onchangeview",viewHandler);var b=a.GetShapeCount();$("#tabs-2").show();$("#liMapView").show();if(b>0){setCustomPushpins(a);hidePolyIcon(a);$("#mapFullQueryUrlHyperlink").html(kmlQuery);$("#mapFullQueryUrlHyperlink").attr({href:kmlQuery});$("#mapFullQueryPanel").show();$("#mapNoResultsDiv").hide();if(b==50)$("#mapManyPlacemarksDiv").show();else $("#mapManyPlacemarksDiv").hide()}else{$("#mapFullQueryPanel").hide();$("#mapNoResultsDiv").show();$("#mapManyPlacemarksDiv").show();$("#tabs-2").hide();$("#liMapView").hide()}map.AttachEvent("onchangeview",viewHandler);setMapViewState()}function hidePolyIcon(b){for(var d=b.GetShapeCount(),a=0;a<d;a++){var c=b.GetShapeByIndex(a);c.GetType()==VEShapeType.Polygon&&c.HideIcon()}}function setCustomPushpins(a){for(var f=a.GetShapeCount(),e,b=0;b<f;++b){e=a.GetShapeByIndex(b);e.SetCustomIcon("<img src='/Images/pushpin.png' alt='image showing the location of the selected place' longdesc='desc/longdesc.txt'/>")}var c=new VECustomIconSpecification;c.Image="/Images/pushpin-expand.png";var d=new VEClusteringOptions;d.Icon=c;a.SetClusteringConfiguration(VEClusteringType.Grid,d);map.AttachEvent("onchangeview",viewHandler)}function setMapViewState(){switch(isBookMarkedMapView){case"N":hash_viewType=="MapView"&&hash_tagType=="Results"&&setMapViewByHash();break;case"Y":map.DetachEvent("onchangeview",viewHandler);isBookMarkedMapView="N";showLoadingIndicator();mapMode=1;mapStyle=hash_mapStyle;zoomLevel=hash_zoomLevel;longitude=hash_longitude;latitude=hash_latitude;sceneId=hash_sceneId;birdseyeSceneOrientation=hash_birdseyeSceneOrientation;try{map.SetMapMode(mapMode);switch(mapStyle){case"r":case"a":case"h":map.SetMapStyle(mapStyle);map.AttachEvent("onchangeview",hideLoadingIndicatorAndDetach);map.AttachEvent("onendzoom",applyProperZoom);if(zoomLevel==defaultZoomLevelOfMapSet+1)map.SetCenterAndZoom(new VELatLong(latitude,longitude),zoomLevel);else map.SetCenterAndZoom(new VELatLong(latitude,longitude),zoomLevel-1);break;case"o":map.AttachEvent("onchangemapstyle",onChangeMapStyleOblique);map.SetMapStyle(mapStyle);break;case"b":map.AttachEvent("onchangemapstyle",onChangeMapStyleBirdseye);map.SetMapStyle(mapStyle)}}catch(a){errorFunction(mapControlError,true);hideLoadingIndicator()}}}function applyProperZoom(){try{map.SetZoomLevel(zoomLevel);map.DetachEvent("onendzoom",applyProperZoom)}catch(a){errorFunction(mapControlError,true);hideLoadingIndicator()}}function onChangeMapStyleOblique(){try{map.AttachEvent("onchangeview",onChangeViewOblique)}catch(b){errorFunction(mapControlError,true);hideLoadingIndicator()}}function onChangeMapStyleBirdseye(){try{map.AttachEvent("onchangeview",onChangeViewBirdseye)}catch(b){errorFunction(mapControlError,true);hideLoadingIndicator()}}function onChangeViewBirdseye(a){try{if(a.birdseyeSceneID!=sceneId){map.SetBirdseyeScene(sceneId);map.DetachEvent("onchangemapstyle",onChangeMapStyleBirdseye)}else{map.DetachEvent("onchangeview",onChangeViewBirdseye);setOtherParamsForBirdsEyeView()}}catch(b){errorFunction(mapControlError,true);hideLoadingIndicator()}}function onChangeViewOblique(a){try{if(a.birdseyeSceneID!=sceneId){map.SetBirdseyeScene(sceneId);map.DetachEvent("onchangemapstyle",onChangeMapStyleOblique)}else{map.DetachEvent("onchangeview",onChangeViewOblique);setOtherParamsForBirdsEyeView()}}catch(b){errorFunction(mapControlError,true);hideLoadingIndicator()}}function setOtherParamsForBirdsEyeView(){try{birdsEyeViewZoomLevel=parseInt(zoomLevel);centerPixel=new VEPixel(longitude,latitude);birdsEyeSceneGlobal=map.GetBirdseyeScene();var a=birdsEyeSceneGlobal.PixelToLatLong(centerPixel,birdsEyeViewZoomLevel);map.AttachEvent("onchangeview",hideLoadingIndicatorAndDetach);switch(birdseyeSceneOrientation){case"North":map.SetBirdseyeScene(a,VEOrientation.North,birdsEyeViewZoomLevel,dummyCallback);break;case"South":map.SetBirdseyeScene(a,VEOrientation.South,birdsEyeViewZoomLevel,dummyCallback);break;case"East":map.SetBirdseyeScene(a,VEOrientation.East,birdsEyeViewZoomLevel,dummyCallback);break;case"West":map.SetBirdseyeScene(a,VEOrientation.West,birdsEyeViewZoomLevel,dummyCallback)}}catch(b){errorFunction(mapControlError,true);hideLoadingIndicator()}}function hideLoadingIndicatorAndDetach(){try{map.DetachEvent("onchangeview",hideLoadingIndicatorAndDetach);map.SetMapStyle(hash_mapStyle);setTimeout(hideLoadingIndicatorAndAttachViewHandler,3e3)}catch(a){errorFunction(mapControlError,true);hideLoadingIndicator()}}function hideLoadingIndicatorAndAttachViewHandler(){hideLoadingIndicator();map.AttachEvent("onchangeview",viewHandler)}function dummyCallback(){}function copyDataCode(){htmlContent=$("#divDataViewSampleCode").html();textContent=stripHTML(htmlContent);$.clipboard(textContent);$("#copyDataCodeButton").animate({opacity:"hide"},"fast");$("#copyDataCodeButton").animate({opacity:"show"},"slow")}function copyMapCode(){htmlContent=$("#divMapViewSampleCode").html();textContent=stripHTML(htmlContent);$.clipboard(textContent);$("#copyMapCodeButton").animate({opacity:"hide"},"fast");$("#copyMapCodeButton").animate({opacity:"show"},"slow")}function copyBarChartCode(){htmlContent=$("#divBarChartViewSampleCode").html();textContent=stripHTML(htmlContent);$.clipboard(textContent);$("#copyBarChartCodeButton").animate({opacity:"hide"},"fast");$("#copyBarChartCodeButton").animate({opacity:"show"},"slow")}function copyPieChartCode(){htmlContent=$("#divPieChartViewSampleCode").html();textContent=stripHTML(htmlContent);$.clipboard(textContent);$("#copyPieChartCodeButton").animate({opacity:"hide"},"fast");$("#copyPieChartCodeButton").animate({opacity:"show"},"slow")}function stripHTML(a){a=a.replace(/<\/PRE>/g,"\r\n");a=a.replace(/&nbsp;/g,"\r\n");a=a.replace(/\r\n\r\n/g,"\r\n");var b=/<\S[^><]*>/g;a=a.replace(b,"");a=a.replace(/&amp;/g,"&");a=a.replace(/&lt;/g,"<");a=a.replace(/&gt;/g,">");a=a.replace(/&nbsp;&nbsp;&nbsp;/g,"\t");a=a.replace(/<br \/>/g,"\r\n");return a}function barOption1Selected(){enableOption1Controls()}function barOption2Selected(){enableOption2Controls()}function pieOption1Selected(){enablePieOption1Controls()}function pieOption2Selected(){enablePieOption2Controls()}function enableOption1Controls(){var a=document.getElementsByName("BarVerticalColumnOptions");for(i=0;i<a.length;i++)a[i].disabled=true;$("#ddlBarVertical").attr("disabled","disabled");$("#labelBarAggregate").attr("style","color:Gray");$("#labelBarAverage").attr("style","color:Gray");$("#VerticalComboBoxLabel").attr("style","color:Gray");$("#labelBarCount").removeAttr("style")}function enablePieOption1Controls(){var a=document.getElementsByName("PieVerticalColumnOptions");for(i=0;i<a.length;i++)a[i].disabled=true;$("#ddlPieVertical").attr("disabled","disabled");$("#labelPieAggregate").attr("style","color:Gray");$("#labelPieAverage").attr("style","color:Gray");$("#labelPieVerticalComboBox").attr("style","color:Gray");$("#labelPieCount").removeAttr("style")}function enableOption2Controls(){var a=document.getElementsByName("BarVerticalColumnOptions");for(i=0;i<a.length;i++)a[i].disabled=false;$("#ddlBarVertical").removeAttr("disabled");$("#labelBarAggregate").removeAttr("style");$("#labelBarAverage").removeAttr("style");$("#VerticalComboBoxLabel").removeAttr("style");$("#labelBarCount").attr("style","color:Gray")}function enablePieOption2Controls(){var a=document.getElementsByName("PieVerticalColumnOptions");for(i=0;i<a.length;i++)a[i].disabled=false;$("#ddlPieVertical").removeAttr("disabled");$("#labelPieAggregate").removeAttr("style");$("#labelPieAverage").removeAttr("style");$("#labelPieVerticalComboBox").removeAttr("style");$("#labelPieCount").attr("style","color:Gray")}function horizontalBarComboBoxSelected(a){var c=a.toString().indexOf("^",0),b=a.toString().substring(0,c);if(b=="System.DateTime"){$("#labelBarDateRange").attr("style","display:block;");$("#ddlBarDateRange").attr("style","display:block;")}else{$("#labelBarDateRange").attr("style","display:none;");$("#ddlBarDateRange").attr("style","display:none;")}SetBarChartLabel()}function SetBarChartLabel(){$("#labelBarCount > span").remove();var a=$("#ddlBarHorizontal > option:selected").text();if(a==defaultSelectOneText)a=horizontalAxisColText;else if(a.length>20)a=a.substring(0,20)+"..";$("#labelBarCount").append("<span>&ldquo;"+a+"&rdquo;</span>")}function horizontalPieComboBoxSelected(a){var c=a.toString().indexOf("^",0),b=a.toString().substring(0,c);if(b=="System.DateTime"){$("#labelPieDateRange").attr("style","display:block;");$("#ddlPieDateRange").attr("style","display:block;")}else{$("#labelPieDateRange").attr("style","display:none;");$("#ddlPieDateRange").attr("style","display:none;")}SetPieChartLabel()}function SetPieChartLabel(){$("#labelPieCount > span").remove();var a=$("#ddlPieHorizontal > option:selected").text();if(a==defaultSelectOneText)a=horizontalAxisColText;else if(a.length>20)a=a.substring(0,20)+"..";$("#labelPieCount").append("<span>&ldquo;"+a+"&rdquo;</span>")}function ShowBarChartError(){document.getElementById("divBarChartError").style.display="block";document.getElementById("divBarChartResults").style.display="none"}function ShowPieChartError(){document.getElementById("divPieChartError").style.display="block";document.getElementById("divPieChartResults").style.display="none"}function showBarChartGraph(){document.getElementById("divBarChartError").style.display="none";document.getElementById("divBarChartResults").style.display="block"}function showPieChartGraph(){document.getElementById("divPieChartError").style.display="none";document.getElementById("divPieChartResults").style.display="block";if(navigator.appName=="Netscape")document.getElementById("divPieResultHeight").style.height="100%"}function GetFilter(){var a=$("#queryBox").val().replace(/^\s+|\s+$/g,"");if(a.indexOf(defaultFilterText,0)>=0)a=noFilterText;return a}function SetFilter(a){if(a==noFilterText)a=defaultFilterText;document.getElementById("queryBox").value=a}function showLoadingIndicator(){var a=getBodyHeight(),b=getBodyWidth();$("#BackGroundLoadingIndicator").attr("style","display:block;height:"+a+"px;width:"+b+"px");$("#LoadingIndicatorPanel").attr("style","display:block;");$("#imgLoading").attr("style","display:block;")}function hideLoadingIndicator(){$("#LoadingIndicatorPanel").attr("style","display:none;");$("#BackGroundLoadingIndicator").attr("style","display:none;");$("#imgLoading").attr("style","display:none;")}function getBodyWidth(){var a=0,c=0,b=0,d=0;if(document.width)a=document.width;else if(document.body){if(document.body.scrollWidth)a=c=document.body.scrollWidth;if(document.body.offsetWidth)a=b=document.body.offsetWidth;if(c&&b){a=d=Math.max(c,b);if(c!=b)a=a*(1003/936);if(screen.width)a=d=Math.max(a,screen.width)}}return navigator.appName=="Microsoft Internet Explorer"||navigator.appName=="Opera"?a:navigator.appName=="Netscape"?Math.max(screen.width,window.innerWidth):a}function getBodyHeight(){var a=0,c=0,b=0,d;if(document.height)a=document.height;else if(document.body){if(document.body.scrollHeight)a=c=document.body.scrollHeight;if(document.body.offsetHeight)a=b=document.body.offsetHeight;if(c&&b)a=d=Math.max(c,b)}return navigator.appName=="Microsoft Internet Explorer"?a:window.screen.availHeight*(screen.deviceYDPI/screen.logicalYDPI)}window.onresize=setLayerPosition;function setLayerPosition(){var a=document.getElementById("BackGroundLoadingIndicator");a.style.width=getBodyWidth()+"px";a.style.height=getBodyHeight()+"px"}function getBarChartParametersInCurrentVariables(){current_horizontalColumnName=$("#ddlBarHorizontal > option:selected").attr("text");if(current_horizontalColumnName==undefined||current_horizontalColumnName==defaultSelectOneText)current_horizontalColumnName="X";var c=document.getElementById("ddlBarDateRange");if(c.style.display!="block")current_dateRange="X";else current_dateRange=$("#ddlBarDateRange > option:selected").attr("text");var b=document.getElementsByName("BarVerticalOptions");current_verticalOptions="";for(i=0;i<b.length;i++)if(b[i].checked){current_verticalOptions=b[i].value;break}current_verticalColumnName=$("#ddlBarVertical > option:selected").attr("text");if(current_verticalColumnName==undefined||current_verticalColumnName==defaultSelectOneText)current_verticalColumnName="X";var a=document.getElementsByName("BarVerticalColumnOptions");current_verticalColumnOptions="";for(i=0;i<a.length;i++)if(a[i].checked){current_verticalColumnOptions=a[i].value;break}}function getPieChartParametersInCurrentVariables(){current_horizontalColumnName=$("#ddlPieHorizontal > option:selected").attr("text");if(current_horizontalColumnName==undefined||current_horizontalColumnName==defaultSelectOneText)current_horizontalColumnName="X";var c=document.getElementById("ddlPieDateRange");if(c.style.display!="block")current_dateRange="X";else current_dateRange=$("#ddlPieDateRange > option:selected").attr("text");var b=document.getElementsByName("PieVerticalOptions");current_verticalOptions="";for(i=0;i<b.length;i++)if(b[i].checked){current_verticalOptions=b[i].value;break}current_verticalColumnName=$("#ddlPieVertical > option:selected").attr("text");if(current_verticalColumnName==undefined||current_verticalColumnName==defaultSelectOneText)current_verticalColumnName="X";var a=document.getElementsByName("PieVerticalColumnOptions");current_verticalColumnOptions="";for(i=0;i<a.length;i++)if(a[i].checked){current_verticalColumnOptions=a[i].value;break}}function debug(){alert("\nhash_filter-->"+hash_filter+"\nhash_viewType-->"+hash_viewType+"\nhash_tagType-->"+hash_tagType+"\nhash_language-->"+hash_language+"\nhash_horizontalColumnName-->"+hash_horizontalColumnName+"\nhash_dateRange-->"+hash_dateRange+"\nhash_verticalOptions-->"+hash_verticalOptions+"\nhash_verticalColumnName-->"+hash_verticalColumnName+"\nhash_verticalColumnOptions-->"+hash_verticalColumnOptions+"\n\n\nhash_mapStyle-->"+hash_mapStyle+"\nhash_zoomLevel-->"+hash_zoomLevel+"\nhash_longitude-->"+hash_longitude+"\nhash_latitude-->"+hash_latitude+"\nhash_sceneId-->"+hash_sceneId+"\nhash_birdseyeSceneOrientation-->"+hash_birdseyeSceneOrientation+"\n\n\ncurrent_filter-->"+current_filter+"\ncurrent_viewType-->"+current_viewType+"\ncurrent_tagType-->"+current_tagType+"\ncurrent_language-->"+current_language+"\ncurrent_horizontalColumnName-->"+current_horizontalColumnName+"\ncurrent_dateRange-->"+current_dateRange+"\ncurrent_verticalOptions-->"+current_verticalOptions+"\ncurrent_verticalColumnName-->"+current_verticalColumnName+"\ncurrent_verticalColumnOptions-->"+current_verticalColumnOptions+"\n\n\ncurrent_mapStyle-->"+current_mapStyle+"\ncurrent_zoomLevel-->"+current_zoomLevel+"\ncurrent_longitude-->"+current_longitude+"\ncurrent_latitude-->"+current_latitude+"\ncurrent_sceneId-->"+current_sceneId+"\ncurrent_birdseyeSceneOrientation-->"+current_birdseyeSceneOrientation)}